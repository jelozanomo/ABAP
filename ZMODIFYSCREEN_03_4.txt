*&---------------------------------------------------------------------*
*& Report ZMODIFYSCREEN_03_4
*&---------------------------------------------------------------------*
*&
*&---------------------------------------------------------------------*
REPORT ZMODIFYSCREEN_03_4.

TYPE-POOLS: VRM,
            ICON.
*SELECTION SCREEN FIELDS
TABLES: SSCRFIELDS.
DATA: FLAG          TYPE C,
      TABLENAME(10),
      MMTABLE       LIKE DD02L-TABNAME,
      SDTABLE       LIKE DD02L-TABNAME,
      HRTABLE       LIKE DD02L-TABNAME.

DATA IT_UCOMM TYPE TABLE OF SY-UCOMM.

SELECTION-SCREEN BEGIN OF BLOCK BLK1 WITH FRAME.
PARAMETERS: PA RADIOBUTTON GROUP RAD USER-COMMAND COM  MODIF ID MOD,
            PB RADIOBUTTON GROUP RAD MODIF ID RAD,
            PC RADIOBUTTON GROUP RAD MODIF ID CAD.

SELECTION-SCREEN SKIP.
**TO INLCUDE DYNAMIC ICONS
SELECTION-SCREEN COMMENT 2(6) TEXT_001.
*DYNAMIC  LISTBOX
PARAMETERS ONE AS LISTBOX VISIBLE LENGTH 20 MODIF ID MOD.
PARAMETERS TWO AS LISTBOX VISIBLE LENGTH 20 MODIF ID RAD.
PARAMETERS THREE AS LISTBOX VISIBLE LENGTH 20 MODIF ID CAD.
SELECTION-SCREEN END OF BLOCK BLK1.

*DISPLAY DYNAMIC PUSHBUTTON ON APP TOLBAR ON USER CLICKS
SELECTION-SCREEN: FUNCTION KEY 1,
                  FUNCTION KEY 2,
                  FUNCTION KEY 3.

*EVENT ON SELECTION SCREEN FOR OUTPUT DISPLAY
AT SELECTION-SCREEN OUTPUT.

*CLICK OF FIRST RADIO BUTTON
  IF PA = 'X'.
    SSCRFIELDS-FUNCTXT_01 = 'Materials Management'.
    WRITE ICON_PLANT AS ICON TO TEXT_001.
*CODE TO GET DYNAMICS BASED ON THE SELECT RADIO.
    LOOP AT SCREEN.
      IF SCREEN-GROUP1 = 'MOD'.
        SCREEN-INTENSIFIED = '1'.
        SCREEN-ACTIVE = 1.
        SCREEN-DISPLAY_3D = '1'.
        MODIFY SCREEN.
      ENDIF.
      IF SCREEN-GROUP1 = 'RAD'.
        SCREEN-INTENSIFIED = '0'.
        SCREEN-ACTIVE = 0.
        SCREEN-DISPLAY_3D = '0'.
        MODIFY SCREEN.
      ENDIF.
      IF SCREEN-GROUP1 = 'CAD'.
        SCREEN-INTENSIFIED = '0'.
        SCREEN-ACTIVE = 0.
        SCREEN-DISPLAY_3D = '0'.
        MODIFY SCREEN.
      ENDIF.
    ENDLOOP.
  ENDIF.

*CLICK OF SECONDS RADIO BUTTON
  IF PB = 'X'.
    SSCRFIELDS-FUNCTXT_02 = 'Sales And Distribution'.
    WRITE ICON_WS_SHIP AS ICON TO TEXT_001.
*CODE TO GET DYNAMICS BASED ON THE SELECT RADIO.
    LOOP AT SCREEN.
      IF SCREEN-GROUP1 = 'MOD'.
        SCREEN-INTENSIFIED = '0'.
        SCREEN-ACTIVE = 0.
        SCREEN-DISPLAY_3D = '0'.
        MODIFY SCREEN.
      ENDIF.
      IF SCREEN-GROUP1 = 'RAD'.
        SCREEN-INTENSIFIED = '1'.
        SCREEN-ACTIVE = 1.
        SCREEN-DISPLAY_3D = '1'.
        MODIFY SCREEN.
      ENDIF.
      IF SCREEN-GROUP1 = 'CAD'.
        SCREEN-INTENSIFIED = '0'.
        SCREEN-ACTIVE = 0.
        SCREEN-DISPLAY_3D = '0'.
        MODIFY SCREEN.
      ENDIF.
    ENDLOOP.
  ENDIF.

*CLICK OF THIRD RADIO BUTTON
  IF PC = 'X'.
    SSCRFIELDS-FUNCTXT_02 = 'Sales And Distribution'.
    WRITE ICON_WS_SHIP AS ICON TO TEXT_001.
*CODE TO GET DYNAMICS BASED ON THE SELECT RADIO.
    LOOP AT SCREEN.
      IF SCREEN-GROUP1 = 'MOD'.
        SCREEN-INTENSIFIED = '0'.
        SCREEN-ACTIVE = 0.
        SCREEN-DISPLAY_3D = '0'.
        MODIFY SCREEN.
      ENDIF.
      IF SCREEN-GROUP1 = 'RAD'.
        SCREEN-INTENSIFIED = '0'.
        SCREEN-ACTIVE = 0.
        SCREEN-DISPLAY_3D = '0'.
        MODIFY SCREEN.
      ENDIF.
      IF SCREEN-GROUP1 = 'CAD'.
        SCREEN-INTENSIFIED = '1'.
        SCREEN-ACTIVE = 1.
        SCREEN-DISPLAY_3D = '1'.
        MODIFY SCREEN.
      ENDIF.
    ENDLOOP.
  ENDIF.

* PERSONALIZACIÓN DE LAS BARRAS DE HERRAMIENTAS DE LA PANTALLA DE
* SELECCIÓN
* CON EL BOTÓN F8 DESHABILITADO

  APPEND: 'PRIN' TO IT_UCOMM,
          'SPOS' TO IT_UCOMM,
          'ONLI' TO IT_UCOMM.
*SY-PFKEY :  Actual GUI Status
  CALL FUNCTION 'RS_SET_SELSCREEN_STATUS'
    EXPORTING
      P_STATUS  = SY-PFKEY
*     P_PROGRAM = ' '
    TABLES
      P_EXCLUDE = IT_UCOMM.
  .

AT SELECTION-SCREEN.

*LIST BOX ONE VALUES
  CASE ONE.
    WHEN '1'.
      MMTABLE = 'SCARR'.
    WHEN '2'.
      MMTABLE = 'SBOOK'.
    WHEN '3'.
      MMTABLE = 'SPFLI'.
    WHEN '4'.
      MMTABLE = 'SFLIGHT'.
  ENDCASE.

*LIST BOX ONE VALUES
  CASE TWO.
    WHEN '1'.
      SDTABLE = 'SCARR'.
    WHEN '2'.
      SDTABLE = 'SBOOK'.
    WHEN '3'.
      SDTABLE = 'VBUK'.
    WHEN '4'.
      SDTABLE = 'VBUP'.
  ENDCASE.

*LIST BOX ONE VALUES
  CASE THREE.
    WHEN '1'.
      HRTABLE = 'PA0001'.
    WHEN '2'.
      HRTABLE = 'PA0006'.
    WHEN '3'.
      HRTABLE = 'PA0022'.
    WHEN '4'.
      HRTABLE = 'PA0008'.
  ENDCASE.

* VALORES DE CLICK DEL PULSADOR EN LA APLICACIÓN DE LA BARRA DE HERRAMIENTAS
* Y HABILITANDO LOS BOTONES PARA REALIZAR F8

  CASE SSCRFIELDS-UCOMM.
    WHEN 'FC01'.
      TABLENAME = MMTABLE.
      SSCRFIELDS-UCOMM = 'ONLI'.
    WHEN 'FC02'.
      TABLENAME = SDTABLE.
      SSCRFIELDS-UCOMM = 'ONLI'.
    WHEN 'FC03'.
      TABLENAME = HRTABLE.
      SSCRFIELDS-UCOMM = 'ONLI'.
  ENDCASE.

*INICIALLIZATION EVENT.
INITIALIZATION.
* VALORES ASIGNADOS A LAS LISTAS DE DESCARGA EN LAS SUBRUTINAS

  PERFORM F4_VALUE_REQUEST_PA.
  PERFORM F4_VALUE_REQUEST_PB.
  PERFORM F4_VALUE_REQUEST_PC.

START-OF-SELECTION.

**SUBRUTINA FOR OUTPUT.
PERFORM OUTPUT.

FORM F4_VALUE_REQUEST_PA.
  DATA: L_NAME  TYPE VRM_ID,
        LI_LIST TYPE VRM_VALUES, "TABLA
        L_VALUE LIKE LINE OF LI_LIST. "TABLA

  L_VALUE-KEY = '1'.
  L_VALUE-TEXT = 'PLANT DATA FOR MATERIAL'.
  APPEND L_VALUE TO LI_LIST.
  CLEAR L_VALUE.

  L_VALUE-KEY = '2'.
  L_VALUE-TEXT = 'General Material Data'.
  APPEND L_VALUE TO LI_LIST.
  CLEAR L_VALUE.

  L_VALUE-KEY = '3'.
  L_VALUE-TEXT = 'Storage Location Data for Material'.
  APPEND L_VALUE TO LI_LIST.
  CLEAR L_VALUE.

  L_VALUE-KEY = '4'.
  L_VALUE-TEXT = 'Units of Measure for Material'.
  APPEND L_VALUE TO LI_LIST.
  CLEAR L_VALUE.

  L_NAME = 'ONE'.

  CALL FUNCTION 'VRM_SET_VALUES'
    EXPORTING
      ID              = L_NAME
      VALUES          = LI_LIST
    EXCEPTIONS
      ID_ILLEGAL_NAME = 1
      OTHERS          = 2.
  IF SY-SUBRC <> 0.
    MESSAGE ID SY-MSGID TYPE SY-MSGTY NUMBER SY-MSGNO
           WITH SY-MSGV1 SY-MSGV2 SY-MSGV3 SY-MSGV4.
  ENDIF.

ENDFORM.


FORM F4_VALUE_REQUEST_PB.
  DATA: L_NAME  TYPE VRM_ID,
        LI_LIST TYPE VRM_VALUES, "TABLA
        L_VALUE LIKE LINE OF LI_LIST. "TABLA

  L_VALUE-KEY = '1'.
  L_VALUE-TEXT = 'Sales Document: Header Data'.
  APPEND L_VALUE TO LI_LIST.
  CLEAR L_VALUE.

  L_VALUE-KEY = '2'.
  L_VALUE-TEXT = 'Sales Document: Item Data'.
  APPEND L_VALUE TO LI_LIST.
  CLEAR L_VALUE.

  L_VALUE-KEY = '3'.
  L_VALUE-TEXT = 'Sales Document:Header Status'.
  APPEND L_VALUE TO LI_LIST.
  CLEAR L_VALUE.

  L_VALUE-KEY = '4'.
  L_VALUE-TEXT = 'Sales Document: Item Status'.
  APPEND L_VALUE TO LI_LIST.
  CLEAR L_VALUE.

  L_NAME = 'TWO'.
* FUNCION PARA LLENAR LOS LISTBOX
  CALL FUNCTION 'VRM_SET_VALUES'
    EXPORTING
      ID              = L_NAME
      VALUES          = LI_LIST
    EXCEPTIONS
      ID_ILLEGAL_NAME = 1
      OTHERS          = 2.
  IF SY-SUBRC <> 0.
    MESSAGE ID SY-MSGID TYPE SY-MSGTY NUMBER SY-MSGNO
           WITH SY-MSGV1 SY-MSGV2 SY-MSGV3 SY-MSGV4.
  ENDIF.
ENDFORM.

*SUBROUTINE TO PROVIDE DROPDOWN VALUES TO LIST3
FORM F4_VALUE_REQUEST_PC.

  DATA: L_NAME  TYPE VRM_ID,
        LI_LIST TYPE VRM_VALUES,
        L_VALUE LIKE LINE OF LI_LIST.

    L_VALUE-KEY = '1'.
    L_VALUE-TEXT = 'HR Master :Infotype 0001 (Org. Assignment)'.
    APPEND L_VALUE TO LI_LIST.
    CLEAR L_VALUE.

    L_VALUE-KEY = '2'.
    L_VALUE-TEXT = 'Address Infotype 0006'.
    APPEND L_VALUE TO LI_LIST.
    CLEAR L_VALUE.

    L_VALUE-KEY = '3'.
    L_VALUE-TEXT = 'Education Infotype 0022'.
    APPEND L_VALUE TO LI_LIST.
    CLEAR L_VALUE.

    L_VALUE-KEY = '4'.
    L_VALUE-TEXT = 'Basic Pay Infotype 0008'.
    APPEND L_VALUE TO LI_LIST.
    CLEAR L_VALUE.

  L_NAME = 'THREE'.

  CALL FUNCTION 'VRM_SET_VALUES'
    EXPORTING
      ID              = L_NAME
      VALUES          = LI_LIST
    EXCEPTIONS
      ID_ILLEGAL_NAME = 1
      OTHERS          = 2.
  IF SY-SUBRC <> 0.
    MESSAGE ID SY-MSGID TYPE SY-MSGTY NUMBER SY-MSGNO
            WITH SY-MSGV1 SY-MSGV2 SY-MSGV3 SY-MSGV4.
  ENDIF.
ENDFORM. " f4_value_request_PC

FORM OUTPUT.
  DATA P_TABLE(10).
    P_TABLE = TABLENAME.

    CALL FUNCTION 'POPUP_TO_DISPLAY_TEXT'
      EXPORTING
       TITEL              = ' User Selections '
       TEXTLINE1          = P_TABLE
       TEXTLINE2          = 'is the selectd table '
       START_COLUMN       = 25
       START_ROW          = 6.

    SET PARAMETER ID 'DTB' FIELD P_TABLE.
    CALL TRANSACTION 'SE16'
              .
    ENDFORM.